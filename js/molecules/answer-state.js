// Answer State - Basado en ILibTbAnswerState interface
// Referencia: knowledge_base/tech_block_lib/molecules/answer_state/

// Answer State para p√°gina no encontrada (404)
export const answerStateCustom = {
    // N√∫mero de error
    number: '404',
    
    // Pictograma predefinido (si no se usa img)
    // pictograma: 'not-found', // 'not-found' | 'no-internet' | 'timeout' | 'in-construction'
    
    // T√≠tulo del estado
    title: 'P√°gina no encontrada',
    
    // Descripci√≥n del estado
    description: 'Lo sentimos, la p√°gina que buscas no existe o ha sido movida. Puedes regresar al inicio o explorar otras secciones de nuestro sitio.',
    
    // Imagen personalizada (en lugar de pictograma)
    img: {
        src: 'https://images.unsplash.com/photo-1584824486509-112e4181ff6b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
        alt: 'Ilustraci√≥n de p√°gina no encontrada - Error 404',
        defaultWidth: 300,
        defaultHeight: 200
    },
    
    // Bot√≥n de acci√≥n (ILibTbButton)
    libTbButton: {
        label: 'Volver al Inicio',
        icon: 'fas fa-home',
        iconPosition: 'left',
        styleBtn: 'fill', // 'fill' | 'stroke' | 'text'
        typeBtn: 'primary', // 'primary' | 'secondary' | 'error' | 'warning' | 'success'
        size: 'large', // 'small' | 'medium' | 'large'
        class: 'answer-state-button',
        libTbClick: (e) => {
            console.log('Answer State - Bot√≥n clickeado:', e);
            console.log('üè† Navegando al inicio...');
            
            // Simular navegaci√≥n al inicio
            console.log('üîÑ Redirigiendo a la p√°gina principal...');
            
            // En un entorno real, aqu√≠ se har√≠a la navegaci√≥n
            // router.navigate(['/']);
            // window.location.href = '/';
            
            setTimeout(() => {
                console.log('‚úÖ Navegaci√≥n completada');
                console.log('üéØ Usuario redirigido al inicio exitosamente');
                
                // Simular cambio de estado para mostrar diferentes ejemplos
                console.log('üé≠ Cambiando a estado de "En construcci√≥n" en 3 segundos...');
                
                setTimeout(() => {
                    // Cambiar a estado "En construcci√≥n"
                    answerStateCustom.number = '';
                    answerStateCustom.title = 'Secci√≥n en construcci√≥n';
                    answerStateCustom.description = 'Estamos trabajando para mejorar esta secci√≥n. Pronto estar√° disponible con nuevas funcionalidades.';
                    answerStateCustom.img.src = 'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
                    answerStateCustom.img.alt = 'Ilustraci√≥n de construcci√≥n - Secci√≥n en desarrollo';
                    answerStateCustom.libTbButton.label = 'Notificarme';
                    answerStateCustom.libTbButton.icon = 'fas fa-bell';
                    answerStateCustom.libTbButton.typeBtn = 'warning';
                    
                    updateAnswerStateElement();
                    console.log('üöß Estado cambiado a "En construcci√≥n"');
                    
                    // Volver al estado original despu√©s de 5 segundos
                    setTimeout(() => {
                        console.log('üîÑ Volviendo al estado original...');
                        answerStateCustom.number = '404';
                        answerStateCustom.title = 'P√°gina no encontrada';
                        answerStateCustom.description = 'Lo sentimos, la p√°gina que buscas no existe o ha sido movida. Puedes regresar al inicio o explorar otras secciones de nuestro sitio.';
                        answerStateCustom.img.src = 'https://images.unsplash.com/photo-1584824486509-112e4181ff6b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
                        answerStateCustom.img.alt = 'Ilustraci√≥n de p√°gina no encontrada - Error 404';
                        answerStateCustom.libTbButton.label = 'Volver al Inicio';
                        answerStateCustom.libTbButton.icon = 'fas fa-home';
                        answerStateCustom.libTbButton.typeBtn = 'primary';
                        
                        updateAnswerStateElement();
                        console.log('‚úÖ Estado original restaurado');
                    }, 5000);
                    
                }, 3000);
                
            }, 1000);
        }
    },
    
    // Estilos personalizados
    style: {
        width: '100%',
        maxWidth: '600px',
        margin: '0 auto',
        padding: '40px 20px',
        textAlign: 'center',
        backgroundColor: '#f8f9fa',
        borderRadius: '12px',
        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)'
    },
    
    // Clases CSS personalizadas
    class: 'answer-state-custom error-404'
};

// M√©todo para actualizar el elemento answer-state en el DOM
const updateAnswerStateElement = () => {
    const answerStateElement = document.getElementById('answer-state-1');
    if (answerStateElement) {
        answerStateElement.custom = { ...answerStateCustom };
    }
};

// Funciones auxiliares para el answer-state
export const answerStateHelpers = {
    // Cambiar a estado 404 (p√°gina no encontrada)
    show404: () => {
        console.log('üö´ Mostrando estado 404...');
        answerStateCustom.number = '404';
        answerStateCustom.title = 'P√°gina no encontrada';
        answerStateCustom.description = 'Lo sentimos, la p√°gina que buscas no existe o ha sido movida. Puedes regresar al inicio o explorar otras secciones de nuestro sitio.';
        answerStateCustom.img.src = 'https://images.unsplash.com/photo-1584824486509-112e4181ff6b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
        answerStateCustom.img.alt = 'Ilustraci√≥n de p√°gina no encontrada - Error 404';
        answerStateCustom.libTbButton.label = 'Volver al Inicio';
        answerStateCustom.libTbButton.icon = 'fas fa-home';
        answerStateCustom.libTbButton.typeBtn = 'primary';
        updateAnswerStateElement();
        console.log('‚úÖ Estado 404 mostrado');
    },
    
    // Cambiar a estado 500 (error del servidor)
    show500: () => {
        console.log('üí• Mostrando estado 500...');
        answerStateCustom.number = '500';
        answerStateCustom.title = 'Error interno del servidor';
        answerStateCustom.description = 'Algo sali√≥ mal en nuestros servidores. Nuestro equipo t√©cnico ha sido notificado y est√° trabajando para solucionarlo.';
        answerStateCustom.img.src = 'https://images.unsplash.com/photo-1578662996442-48f60103fc96?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
        answerStateCustom.img.alt = 'Ilustraci√≥n de error del servidor - Error 500';
        answerStateCustom.libTbButton.label = 'Reintentar';
        answerStateCustom.libTbButton.icon = 'fas fa-redo';
        answerStateCustom.libTbButton.typeBtn = 'error';
        updateAnswerStateElement();
        console.log('‚úÖ Estado 500 mostrado');
    },
    
    // Cambiar a estado sin conexi√≥n
    showNoInternet: () => {
        console.log('üì° Mostrando estado sin conexi√≥n...');
        answerStateCustom.number = '';
        answerStateCustom.title = 'Sin conexi√≥n a internet';
        answerStateCustom.description = 'Parece que no tienes conexi√≥n a internet. Verifica tu conexi√≥n y vuelve a intentarlo.';
        answerStateCustom.img.src = 'https://images.unsplash.com/photo-1544717297-fa95b6ee9643?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
        answerStateCustom.img.alt = 'Ilustraci√≥n de sin conexi√≥n - Sin internet';
        answerStateCustom.libTbButton.label = 'Verificar Conexi√≥n';
        answerStateCustom.libTbButton.icon = 'fas fa-wifi';
        answerStateCustom.libTbButton.typeBtn = 'warning';
        updateAnswerStateElement();
        console.log('‚úÖ Estado sin conexi√≥n mostrado');
    },
    
    // Cambiar a estado en construcci√≥n
    showInConstruction: () => {
        console.log('üöß Mostrando estado en construcci√≥n...');
        answerStateCustom.number = '';
        answerStateCustom.title = 'Secci√≥n en construcci√≥n';
        answerStateCustom.description = 'Estamos trabajando para mejorar esta secci√≥n. Pronto estar√° disponible con nuevas funcionalidades.';
        answerStateCustom.img.src = 'https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
        answerStateCustom.img.alt = 'Ilustraci√≥n de construcci√≥n - Secci√≥n en desarrollo';
        answerStateCustom.libTbButton.label = 'Notificarme';
        answerStateCustom.libTbButton.icon = 'fas fa-bell';
        answerStateCustom.libTbButton.typeBtn = 'warning';
        updateAnswerStateElement();
        console.log('‚úÖ Estado en construcci√≥n mostrado');
    },
    
    // Cambiar a estado de timeout
    showTimeout: () => {
        console.log('‚è±Ô∏è Mostrando estado timeout...');
        answerStateCustom.number = '408';
        answerStateCustom.title = 'Tiempo de espera agotado';
        answerStateCustom.description = 'La solicitud tard√≥ demasiado tiempo en procesarse. Por favor, int√©ntalo de nuevo.';
        answerStateCustom.img.src = 'https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80';
        answerStateCustom.img.alt = 'Ilustraci√≥n de timeout - Tiempo agotado';
        answerStateCustom.libTbButton.label = 'Intentar de Nuevo';
        answerStateCustom.libTbButton.icon = 'fas fa-clock';
        answerStateCustom.libTbButton.typeBtn = 'secondary';
        updateAnswerStateElement();
        console.log('‚úÖ Estado timeout mostrado');
    },
    
    // Cambiar a estado personalizado
    showCustomState: (number, title, description, imageSrc, buttonLabel, buttonIcon, buttonType) => {
        console.log('üé® Mostrando estado personalizado...');
        answerStateCustom.number = number || '';
        answerStateCustom.title = title || 'Estado personalizado';
        answerStateCustom.description = description || 'Descripci√≥n personalizada del estado.';
        if (imageSrc) {
            answerStateCustom.img.src = imageSrc;
            answerStateCustom.img.alt = `Ilustraci√≥n personalizada - ${title}`;
        }
        answerStateCustom.libTbButton.label = buttonLabel || 'Acci√≥n';
        answerStateCustom.libTbButton.icon = buttonIcon || 'fas fa-arrow-right';
        answerStateCustom.libTbButton.typeBtn = buttonType || 'primary';
        updateAnswerStateElement();
        console.log(`‚úÖ Estado personalizado mostrado: ${title}`);
    },
    
    // Usar pictograma predefinido en lugar de imagen
    usePictogram: (pictogramType) => {
        const validPictograms = ['not-found', 'no-internet', 'timeout', 'in-construction'];
        if (!validPictograms.includes(pictogramType)) {
            console.log(`‚ùå Pictograma inv√°lido: ${pictogramType}. Opciones v√°lidas:`, validPictograms);
            return;
        }
        
        console.log(`üñºÔ∏è Cambiando a pictograma: ${pictogramType}`);
        
        // Remover imagen personalizada y usar pictograma
        delete answerStateCustom.img;
        answerStateCustom.pictograma = pictogramType;
        
        // Actualizar contenido seg√∫n el pictograma
        switch (pictogramType) {
            case 'not-found':
                answerStateCustom.number = '404';
                answerStateCustom.title = 'P√°gina no encontrada';
                answerStateCustom.description = 'La p√°gina que buscas no existe.';
                break;
            case 'no-internet':
                answerStateCustom.number = '';
                answerStateCustom.title = 'Sin conexi√≥n';
                answerStateCustom.description = 'Verifica tu conexi√≥n a internet.';
                break;
            case 'timeout':
                answerStateCustom.number = '408';
                answerStateCustom.title = 'Tiempo agotado';
                answerStateCustom.description = 'La solicitud tard√≥ demasiado tiempo.';
                break;
            case 'in-construction':
                answerStateCustom.number = '';
                answerStateCustom.title = 'En construcci√≥n';
                answerStateCustom.description = 'Esta secci√≥n est√° en desarrollo.';
                break;
        }
        
        updateAnswerStateElement();
        console.log(`‚úÖ Pictograma ${pictogramType} aplicado`);
    },
    
    // Volver a usar imagen personalizada
    useCustomImage: (imageSrc, alt) => {
        console.log('üñºÔ∏è Cambiando a imagen personalizada...');
        
        // Remover pictograma y usar imagen
        delete answerStateCustom.pictograma;
        answerStateCustom.img = {
            src: imageSrc || 'https://images.unsplash.com/photo-1584824486509-112e4181ff6b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80',
            alt: alt || 'Imagen personalizada',
            defaultWidth: 300,
            defaultHeight: 200
        };
        
        updateAnswerStateElement();
        console.log('‚úÖ Imagen personalizada aplicada');
    },
    
    // Obtener informaci√≥n actual del estado
    getCurrentState: () => {
        const state = {
            number: answerStateCustom.number,
            title: answerStateCustom.title,
            description: answerStateCustom.description,
            hasImage: !!answerStateCustom.img,
            hasPictogram: !!answerStateCustom.pictograma,
            buttonLabel: answerStateCustom.libTbButton?.label,
            buttonType: answerStateCustom.libTbButton?.typeBtn
        };
        
        console.log('üìä Estado actual del answer-state:', state);
        return state;
    },
    
    // Demostraci√≥n de diferentes estados
    demonstrateStates: () => {
        console.log('üé≠ Iniciando demostraci√≥n de estados...');
        
        const states = [
            () => answerStateHelpers.show404(),
            () => answerStateHelpers.show500(),
            () => answerStateHelpers.showNoInternet(),
            () => answerStateHelpers.showInConstruction(),
            () => answerStateHelpers.showTimeout()
        ];
        
        let currentIndex = 0;
        
        const showNextState = () => {
            if (currentIndex < states.length) {
                states[currentIndex]();
                currentIndex++;
                setTimeout(showNextState, 3000);
            } else {
                console.log('üîÑ Volviendo al estado original...');
                answerStateHelpers.show404();
                console.log('‚úÖ Demostraci√≥n completada');
            }
        };
        
        setTimeout(showNextState, 2000);
    }
};
